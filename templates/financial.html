<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>專題-股票分析</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC" rel="stylesheet">
<link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet" type="text/css" />      
</head>
<body>
<!---------------------------------------------->
<div id="wrapper">
    <div id="header-wrapper">
        <div class="header" >
            <div class="title">
                <a href="/"><img src="{{ url_for('static', filename='images/icon.png') }}"  width="80" height="80" class="avatar"></a>
                <h1 class="title">資訊股分析網</h1>
            </div>
            <form action="/financial/{{cType[0]}}" method="post">
                <div class="about">
                    <ul class="drop-down-menu">                      
                        <li class="current_page_item"><a href="#" accesskey="2" title="" class="chart" a href="#">圖表</a>
                            <ul>
                                <li>
                                    <a href="/chart/30days/{{stock}}">近30日</a>
                                </li>
                                <li>
                                    <a href="/chart/today/{{stock}}">當日</a>
                                </li>
                                
                            </ul>
                        </li>
                        <li class="current_page_item"><a href="#" accesskey="1" title="" a href="#">預測圖表</a>
                            <ul>
                                <li>
                                    <a href="/predict/pre/{{stock}}">預測圖表</a>
                                </li>
                                <li>
                                    <a href="#">歷史圖表</a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="#" accesskey="3" title="">新聞</a>
                        </li>
                        <li>
                            <a href="#" accesskey="4" title="">財務分析</a>
                            <ul>
                                <li>
                                    <a href="/financial/SymScore/{{stock}}">個股月營收</a>
                                </li>
                                <li>
                                    <a href="/financial/GrowthAnly/{{stock}}">成長性分析</a>
                                </li>
                                <li>
                                    <a href="/financial/Divpolicy/{{stock}}">股利政策</a>
                                </li>
                                <li>
                                    <a href="/financial/ProfitByQr/{{stock}}">獲利能力分析(季)</a>
                                </li>
                                <li>
                                    <a href="/financial/Capstreq/{{stock}}">資本形成-股東權益(季)</a>
                                </li>
                                <li>
                                    <a href="/financial/Cashratio/{{stock}}">現金分析(年)</a>
                                </li>
                                <li>
                                    <a href="/financial/SolvencyBySym/{{stock}}">償還能力分析(季)</a>
                                </li>
                                <li>
                                    <a href="/financial/Oper/{{stock}}">經營能力分析(年)</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#" accesskey="5" title="">技術分析</a>
                            <ul>
                                <li>
                                    <a href="/technical/rsi/{{stock}}">RSI線</a>
                                </li>
                                <li>
                                    <a href="/technical/kd/{{stock}}">KD線</a>
                                </li>
                                <li>
                                    <a href="/technical/macd/{{stock}}">MACD線</a>
                                </li>
                                <li>
                                    <a href="/technical/bias/{{stock}}">BIAS線</a>
                                </li>
                            </ul>
                        </li>
                        
                    </ul>
                    <div class="search">
                        <ul>
                            <img id="searchIcon" width="24px" src="https://s.yimg.com/cv/apiv2/twstock/icon-search.png"
                                srcset="https://s.yimg.com/cv/apiv2/twstock/icon-search@2x.png 2x, https://s.yimg.com/cv/apiv2/twstock/icon-search@3x.png 3x" />
                                <input id="stock_id" type="text" name="stock_id" placeholder="搜尋台股代號/名稱" />
                                <img id="closeBtn" src="https://s.yimg.com/cv/apiv2/twstock/cancel.png"
                                srcset="https://s.yimg.com/cv/apiv2/twstock/cancel@2x.png 2x, https://s.yimg.com/cv/apiv2/twstock/cancel@3x.png 3x"
                                style="cursor: pointer; display: none" />
                                <button class="btn btn-primary my-2 my-sm-0" type="submit">搜尋</button>
                        </ul>
                    </div>   
                </div>

            </form>  
        </div>
    </div>
</div>
<!---------------------------------------------->
<div class="container">
    <!---------------------------------------------->
    {% if err == 1%}
        <h1>輸入錯誤</h1>
    {% endif %}
    <!---------------------------------------------->
    <div class="bd-toc-item active">
        <a class="bd-toc-link" style="font-weight:550;color: black;font-size:25px;">
            資訊股代號
        </a>
        <ul class="nav bd-sidenav">
            <li>
                <a href="/financial/{{cType[0]}}/2427">2427三商電</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/2453">2453凌群</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/2468">2468華經</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/2471">2471資通</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/2480">2480敦陽</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/3029">3029零壹</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/3130">3130一零四</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/4994">4994傳奇</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/5203">5203訊連</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/6112">6112聚碩</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/6183">6183關貿</a>
            </li>
            <li>
                <a href="/financial/{{cType[0]}}/6214">6214精誠</a>
            </li>
        </ul>
    </div>
    <!---------------------------------------------->
    <div class="content">
        <div class="title1"><h2>{{name}}</h2></div>
        <!---------------------------------------------->            
        <div class="newsbar">
            <div class="news">
                <h2>{{cType[2]}}</h2>
                <canvas id="canvas"></canvas>
            </div>
        </div>        
    </div>
</div>
<!---------------------------------------------->
<div class="footer">
    &copyntubimd2020
</div>
<!---------------------------------------------->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>      
<script src="{{ url_for('static', filename='scripts/main.js') }}"></script>    
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>
<script type="text/javascript">
    var time1 = {{fin[1][0]|safe}};
    var data1 = {{fin[1][1]|safe}};
    var data2 = {{fin[1][2]|safe}};
    var data3 = {{fin[1][3]|safe}};
    var data4 = {{fin[1][4]|safe}};
    var data5 = {{fin[1][5]|safe}};
    var data6 = {{fin[1][6]|safe}};
    var data7 = {{fin[1][7]|safe}};
    var name1 = {{fin[0]|safe}};
    var cha = {{cType[1]|safe}};

    var chartData1 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[4], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data4, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[5], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data5, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData2 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[4], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data4, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData3 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[4], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data4, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[5], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data5, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[6], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data6, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[7], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data7, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData4 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[4], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data4, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        },{
            type: 'bar',
            label: name1[5], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data5, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData5 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData6 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        },{
            type: 'bar',
            label: name1[3], // tootip 出現的名稱
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data3, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
            lineTension: 0, // 曲線的彎度，設0 表示直線
        }]
    };

    var chartData7 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        },{
            type: 'bar',
            label: name1[2], // tootip 出現的名稱
            lineTension: 0, // 曲線的彎度，設0 表示直線
            backgroundColor: "#055ffa",
            borderColor: "#055ffa",
            borderWidth: 2,
            data: data2, // 資料
            fill: false, // 是否填滿色彩
            yAxisID: 'y-axis-1',
        }]
    };

    var chartData8 = {
        labels: time1, //顯示區間名稱
        datasets: [{
            type: 'bar',
            label: name1[1], // tootip 出現的名稱
            backgroundColor: "#ea464d",
            borderColor: "#ea464d",
            borderWidth: 5,
            data: data1, // 資料
            fill: false, // 是否填滿色彩
        }]
    };


    function drawLineCanvas(ctx,data) {
        window.myLine = new Chart(ctx, {  //先建立一個 chart
            data: data,
            options: {
                responsive: true,
                legend: { //是否要顯示圖示
                    display: true,
                },
                tooltips: { //是否要顯示 tooltip
                    enabled: true
                },
                scales: {  //是否要顯示 x、y 軸
                    xAxes: [{
                        display: true
                    },],
                    yAxes: [{
                        display: true
                    },{
                        id: 'y-axis-1',
                        position: 'right',
                        display: true
                    }]
                },
            }
        });
    };

    window.onload = function () {
        var ctx = document.getElementById("canvas").getContext("2d");
        if (cha == 0){
            drawLineCanvas(ctx,chartData1);
        }
        else if (cha == 1){
            drawLineCanvas(ctx,chartData2);
        }
        else if (cha == 2){
            drawLineCanvas(ctx,chartData3);
        }
        else if (cha == 3){
            drawLineCanvas(ctx,chartData4);
        }
        else if (cha == 4){
            drawLineCanvas(ctx,chartData5);
        }
        else if (cha == 5){
            drawLineCanvas(ctx,chartData6);
        }
        else if (cha == 6){
            drawLineCanvas(ctx,chartData7);
        }
        else if (cha == 7){
            drawLineCanvas(ctx,chartData8);
        }
    };
</script>
</body>
</html>
